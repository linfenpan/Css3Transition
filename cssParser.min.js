/**
 * @description 根据字符串，生成 css object 对象
 * @author da棕熊
 * @update 2015/12/22
 * @example
 *      var parser = new CssParser();
 *      parser.css("width:100px;x:20px;time:.2s;");
 *      parser.toString();  // => width:100px;-webkit-transform:translateX(20px);-webkit-transition:width .2s linear,-webkit-transform .2s linear;
 */
;(function(l){function g(a){this.reset();a&&this.css(a)}var f={prefix:function(a){for(var b="",d=document.documentElement.style,e=["t","webkitT","MozT","msT","oT"],c=0,m=e.length;c<m;c++)if(d.hasOwnProperty(e[c]+"ransition")){b=e[c].slice(0,-1).toLowerCase();break}b&&(b="-"+b+"-");this.prefix=function(a){return/transform|transition|animation/.test(a)?b+a:a};return this.prefix(a)},extend:function(a){var b=[].slice.call(arguments,1),d=this;d.each(b,function(b,c){d.each(b,function(b,c){switch(d.type(b)){case "object":a[c]=
d.extend(a[c]||{},b);break;case "array":a[c]=b.slice(0);break;default:a[c]=b}})});return a},each:function(a,b){for(var d in a)a.hasOwnProperty(d)&&b.call(a,a[d],d)},type:function(a){var b=Object.prototype.toString;this.type=function(a){return b.call(a).split(" ")[1].slice(0,-1).toLowerCase()};return this.type(a)},plusCaculate:function(a,b){if(a&&/\d+/.test(a)&&/^[-+*/]\d+/.test(b)){var d=b.replace(/^[-+*/]*\d*/,"")||a.replace(/^[-+*/]*\d*/,"");b=eval(a.replace(/\D*$/,"")+b.replace(/\D*$/,""))+d}return b}},
k={o:"opacity",s:["scale","transform"],sx:["scaleX","transform"],sy:["scaleY","transform"],r:["rotate","transform"],rx:["rotateX","transform"],ry:["rotateY","transform"],x:["translateX","transform"],y:["translateY","transform"],time:["time","transition"],wait:["wait","transition"],tf:["tf","transition"],property:["property","transition"]},h={transition:function(a,b){if(!a.time&&!a.tf&&!a.wait)return null;var d=[],e=[a.time||".2s",a.tf||"linear",a.wait||""].join(" ").trim(),c=a.property;c?c=c.split(","):
(c=[],f.each(b,function(a,b){c.push(b)}));f.each(c,function(a,b){a=a.trim();/transition|animation/.test(a)||d.push(f.prefix(a)+" "+e)});return 0<d.length?d.join(","):null},transform:function(a){var b=[];f.each(a,function(a,e){b.push(e+"("+a+")")});return 0<b.length?b.join(" "):null}};g.prototype={reset:function(){this.styleProperty={};return this},css:function(a){a=a.split(";");var b=this;f.each(a,function(a,e){var c=a.split(":"),f=c[0],c=c[1];(f=f.trim())&&(c&&"null"!==c?b.addProperty(f,c):b.removeProperty(f))});
return this},addProperty:function(a,b){this.afterAlias(a,function(a,e,c){e||(e=this.styleProperty[c]={});e[a]=f.plusCaculate(e[a],b)});return this},removeProperty:function(a){this.afterAlias(a,function(a,d,e){if(d){delete d[a];a=!0;for(var c in d)if(d.hasOwnProperty(c)){a=!1;break}a&&delete this.styleProperty[e]}});return this},getProperty:function(a){if(a){var b;this.afterAlias(a,function(a,e){b=e?e[a]:null});return"object"===f.type(b)?f.extend({},b):b}return f.extend({},this.styleProperty)},afterAlias:function(a,
b){var d=k[a],e=this.styleProperty,c=a;d&&("array"===f.type(d)?(a=d[0],c=d[1],e=e[c]):a=d);b&&b.call(this,a,e,c)},toString:function(){var a=[],b=this;f.each(this.styleProperty,function(d,e){var c=b.stringifyProperty(e);c&&a.push(c)});return 0<a.length?a.join(";")+";":""},stringifyProperty:function(a){var b=this.styleProperty,d=b[a];return d&&h[a]?(b=h[a](d,b))?f.prefix(a)+":"+b:null:"string"===f.type(d)?f.prefix(a)+":"+d:null}};g.addAlias=function(a,b){k[a]=b;return g};g.addConverter=function(a,b){h[a]=
b;return g};l.CssParser=g})(window);
